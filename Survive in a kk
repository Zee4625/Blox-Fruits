--[[
    SUBARU HUB - Survive Bikini Bottom Edition
    Theme: WR Blue & Gold
]]

local splib = loadstring(game:HttpGet("https://raw.githubusercontent.com/as6cd0/SP_Hub/refs/heads/main/splibv2"))()
local player = game.Players.LocalPlayer
local isOnMobile = game:GetService("UserInputService").TouchEnabled

-- Configurare FereastrƒÉ
local Window = splib:MakeWindow({
    Name = "Subaru Hub | Bikini Bottom",
    HidePremium = false,
    SaveConfig = true,
    Setting = true,
    ToggleIcon = "rbxassetid://111710478062549",
    ConfigFolder = "SubaruHubBikini",
    CloseCallback = true
})

splib:SetTheme({
    MainColor = Color3.fromRGB(0, 51, 153),
    AccentColor = Color3.fromRGB(255, 204, 0),
    BackgroundColor = Color3.fromRGB(15, 15, 15),
    TextColor = Color3.fromRGB(255, 255, 255)
})

--- ### UTILS ### ---
local angle = 0
local function getPos()
    local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
    if not hrp then return CFrame.new() end
    angle += 0.7
    return hrp.CFrame * CFrame.new(math.cos(math.rad(angle))*8, 4, math.sin(math.rad(angle))*8)
end

local function bring(item)
    if not item then return end
    local part = item:FindFirstChild("Handle") or item:FindFirstChildWhichIsA("BasePart") or (item:IsA("Model") and item.PrimaryPart)
    if part then
        part.CFrame = getPos()
        task.wait(0.07)
        local p = item:FindFirstChildWhichIsA("ProximityPrompt")
        if p then fireproximityprompt(p) end
    end
end

--- ### TAB PRINCIPAL ### ---
local MainTab = Window:MakeTab({
    IsMobile = isOnMobile,
    Name = "Main Hacks",
    Icon = "rbxassetid://4483345998"
})

-- ==========================================
-- SECTIUNEA: BRING ITEMS
-- ==========================================
MainTab:AddSection({ Name = "Auto Collect / Bring" })

MainTab:AddButton({
    Name = "Bring All Jelly",
    Callback = function()
        angle = 0
        for _,v in workspace.LootDrops:GetDescendants() do
            if v.Name:find("Jelly") then bring(v) end
        end
    end
})

MainTab:AddButton({
    Name = "üçî Bring Food",
    Callback = function()
        angle = 0
        local foods = {"ChocolateBar","CannedBread","KelpShake","Acorn","JellyPatty","BlueJellyPatty","KrabbyPatty"}
        for _,v in workspace.LootDrops:GetDescendants() do
            if table.find(foods, v.Name) then bring(v) end
        end
    end
})

MainTab:AddButton({
    Name = "üîß Bring Scrap",
    Callback = function()
        angle = 0
        local scrap = {"ToxicBarrel","BrokenMotorcycle","CyclopsHelmet","RubberTire","Muffler","OpenCan"}
        for _,v in workspace.LootDrops:GetDescendants() do
            if table.find(scrap, v.Name) then bring(v) end
        end
    end
})

MainTab:AddButton({
    Name = "ü¶Ä Rescue All Characters",
    Callback = function()
        local root = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
        if not root then return end
        local saved = 0
        local names = {"MrKrabs", "SpongeBob", "Patrick", "Squidward", "Sandy"}
        for _, name in pairs(names) do
            for _, obj in workspace:GetDescendants() do
                if obj:IsA("Model") and obj.Name == name then
                    local p = obj.PrimaryPart or obj:FindFirstChildWhichIsA("BasePart")
                    if p then
                        p.CFrame = root.CFrame * CFrame.new(0, 0, -5 - saved*2)
                        saved += 1 task.wait(0.1) break
                    end
                end
            end
        end
    end
})

-- ==========================================
-- SECTIUNEA: PLAYER MODS
-- ==========================================
MainTab:AddSection({ Name = "Player Tweaks" })

MainTab:AddSlider({
    Name = "WalkSpeed",
    Min = 16, Max = 200, Default = 16, Increment = 1,
    Callback = function(Value)
        if player.Character and player.Character:FindFirstChild("Humanoid") then
            player.Character.Humanoid.WalkSpeed = Value
        end
    end
})

MainTab:AddSlider({
    Name = "JumpPower",
    Min = 50, Max = 300, Default = 50, Increment = 1,
    Callback = function(Value)
        local h = player.Character and player.Character:FindFirstChild("Humanoid")
        if h then
            h.JumpPower = Value
            h.JumpHeight = Value / 3
        end
    end
})

MainTab:AddToggle({
    Name = "Infinite Jump",
    Default = false,
    Callback = function(Value)
        _G.InfJump = Value
        game:GetService("UserInputService").JumpRequest:Connect(function()
            if _G.InfJump then
                pcall(function() player.Character.Humanoid:ChangeState("Jumping") end)
            end
        end)
    end
})

MainTab:AddToggle({
    Name = "Noclip",
    Default = false,
    Callback = function(Value)
        _G.Noclip = Value
        game:GetService("RunService").Stepped:Connect(function()
            if _G.Noclip and player.Character then
                for _, v in pairs(player.Character:GetDescendants()) do
                    if v:IsA("BasePart") then v.CanCollide = false end
                end
            end
        end)
    end
})

MainTab:AddButton({
    Name = "Remove Fog",
    Callback = function()
        local l = game:GetService("Lighting")
        l.FogStart = 1e9
        l.FogEnd = 1e9
        l.Brightness = 3
        for _, v in pairs(l:GetChildren()) do
            if v:IsA("Atmosphere") then v.Density = 0 end
        end
    end
})

-- ==========================================
-- SECTIUNEA: ESP VISUALS
-- ==========================================
MainTab:AddSection({ Name = "Visuals (ESP)" })

local function createESP(folder, name_filter, color)
    for _, obj in pairs(folder:GetDescendants()) do
        if obj:IsA("Model") and (not name_filter or obj.Name:find(name_filter)) then
            if not obj:FindFirstChild("ESP_Highlight") then
                local hl = Instance.new("Highlight", obj)
                hl.Name = "ESP_Highlight"
                hl.FillColor = color
                hl.OutlineColor = Color3.new(1,1,1)
                hl.FillTransparency = 0.4
            end
        end
    end
end

MainTab:AddButton({
    Name = "ESP Players",
    Callback = function()
        for _, p in pairs(game.Players:GetPlayers()) do
            if p ~= player and p.Character then
                local hl = Instance.new("Highlight", p.Character)
                hl.FillColor = Color3.new(1,0,0)
            end
        end
    end
})

MainTab:AddButton({
    Name = "ESP Jellyfish",
    Callback = function()
        createESP(workspace, "Jellyfish", Color3.new(1, 0, 1))
    end
})

MainTab:AddButton({
    Name = "ESP Chests",
    Callback = function()
        createESP(workspace, "Chest", Color3.fromRGB(255, 215, 0))
    end
})

-- Notification
splib:MakeNotification({
    Name = "Subaru Hub",
    Content = "All functions from Survive Bikini Bottom loaded!",
    Image = "rbxassetid://128979818272596",
    Time = 5
})
