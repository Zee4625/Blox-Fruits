-- Alone x ZeeHUB GUI V2.3 - Utility extins cu Player Selector, Teleport, Bring, Fly + Hyper X-Ray & Invincibilitate
-- UI RGB curat, fără emoji, cu Mobile & PC Tabs

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local CoreGui = game:GetService("CoreGui")
local TweenService = game:GetService("TweenService")

local LocalPlayer = Players.LocalPlayer

-- Fluent UI (dacă nu ai deja, încarcă de pe github)
local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()
local Window = Fluent:CreateWindow({
    Title = "Alone x ZeeHUB",
    SubTitle = "V2.3 - PC + Mobile",
    TabWidth = 180,
    Size = UDim2.fromOffset(720, 540),
    Theme = "Aqua",
    MinimizeKey = Enum.KeyCode.LeftControl
})

local Tabs = {
    Main = Window:AddTab({ Title = "Main", Icon = "layout" }),
    Movement = Window:AddTab({ Title = "Movement", Icon = "rocket" }),
    Utility = Window:AddTab({ Title = "Utility", Icon = "settings" }),
    Mobile = Window:AddTab({ Title = "Mobile", Icon = "smartphone" })
}

local Options = Fluent.Options

-- Helper pentru lista jucatori
local selectedPlayer = nil

local function RefreshPlayerList(dropdown)
    dropdown:SetOptions({})
    for _, plr in pairs(Players:GetPlayers()) do
        if plr ~= LocalPlayer then
            dropdown:AddOption(plr.Name, function()
                selectedPlayer = plr
            end)
        end
    end
end

-- PLAYER SELECTOR
local playerSelectorDropdown = Tabs.Utility:AddDropdown("PlayerSelector", {
    Title = "Select Player",
    Description = "Selectează un jucător",
    Default = "",
    Options = {}
})
RefreshPlayerList(playerSelectorDropdown)

Players.PlayerAdded:Connect(function()
    task.wait(1)
    RefreshPlayerList(playerSelectorDropdown)
end)
Players.PlayerRemoving:Connect(function()
    task.wait(1)
    if selectedPlayer and not Players:FindFirstChild(selectedPlayer.Name) then
        selectedPlayer = nil
    end
    RefreshPlayerList(playerSelectorDropdown)
end)

-- TELEPORT TO PLAYER
Tabs.Utility:AddButton({
    Title = "Teleport to Player",
    Description = "Te teleportează la jucătorul selectat",
    Callback = function()
        if selectedPlayer and selectedPlayer.Character and selectedPlayer.Character:FindFirstChild("HumanoidRootPart") then
            local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
            if hrp then
                hrp.CFrame = selectedPlayer.Character.HumanoidRootPart.CFrame * CFrame.new(0,3,3)
            end
        else
            warn("Selectează un jucător valid!")
        end
    end
})

-- BRING PLAYER (te duce în zbor la jucător, invincibil și no-clip)
local flying = false
local bodyGyro, bodyVelocity
local function startFlyToTarget(targetCFrame)
    local character = LocalPlayer.Character
    if not character then return end
    local hrp = character:FindFirstChild("HumanoidRootPart")
    local humanoid = character:FindFirstChild("Humanoid")
    if not hrp or not humanoid then return end

    flying = true
    humanoid.PlatformStand = true -- disables animations and falls

    -- Setup BodyGyro & BodyVelocity for smooth flight
    bodyGyro = Instance.new("BodyGyro")
    bodyGyro.P = 9e4
    bodyGyro.MaxTorque = Vector3.new(9e9, 9e9, 9e9)
    bodyGyro.CFrame = hrp.CFrame
    bodyGyro.Parent = hrp

    bodyVelocity = Instance.new("BodyVelocity")
    bodyVelocity.MaxForce = Vector3.new(9e9, 9e9, 9e9)
    bodyVelocity.Velocity = Vector3.new(0,0,0)
    bodyVelocity.Parent = hrp

    -- Invincibilitate si noclip (transparenta partiilor)
    for _, part in pairs(character:GetDescendants()) do
        if part:IsA("BasePart") then
            part.CanCollide = false
            part.Transparency = 0.5
        end
    end

    -- Muta treptat catre target
    local heartbeatConn
    heartbeatConn = RunService.Heartbeat:Connect(function()
        if not flying then
            heartbeatConn:Disconnect()
            humanoid.PlatformStand = false
            bodyGyro:Destroy()
            bodyVelocity:Destroy()
            for _, part in pairs(character:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.CanCollide = true
                    part.Transparency = 0
                end
            end
            return
        end

        local targetPos = targetCFrame.Position + Vector3.new(0,3,0)
        local direction = (targetPos - hrp.Position)
        local distance = direction.Magnitude
        local velocity = direction.Unit * math.min(100, distance * 10)
        bodyVelocity.Velocity = velocity
        bodyGyro.CFrame = CFrame.new(hrp.Position, targetPos)
        
        -- dacă a ajuns aproape, oprește zborul
        if distance < 3 then
            flying = false
        end
    end)
end

Tabs.Utility:AddButton({
    Title = "Bring Player (Fly)",
    Description = "Zboară la jucătorul selectat, invincibil & noclip",
    Callback = function()
        if selectedPlayer and selectedPlayer.Character and selectedPlayer.Character:FindFirstChild("HumanoidRootPart") then
            if flying then
                flying = false
            end
            local targetCFrame = selectedPlayer.Character.HumanoidRootPart.CFrame
            startFlyToTarget(targetCFrame)
        else
            warn("Selectează un jucător valid!")
        end
    end
})

-- Hyper X-Ray (toate părțile jucătorilor devin semi-transparent cu 0.85)
local hyperXrayActive = false
Tabs.Utility:AddToggle("HyperXray", {
    Title = "Hyper X-Ray",
    Description = "Toate parturile jucătorilor devin semi-transparente",
    Default = false
}):OnChanged(function(val)
    hyperXrayActive = val
    for _, plr in pairs(Players:GetPlayers()) do
        if plr.Character then
            for _, part in pairs(plr.Character:GetDescendants()) do
                if part:IsA("BasePart") then
                    if hyperXrayActive then
                        part.Transparency = 0.85
                    else
                        part.Transparency = 0
                    end
                end
            end
        end
    end
end)

-- Funcție pentru resetare caracter (Utility)
Tabs.Utility:AddButton({
    Title = "Reset Character",
    Description = "Reîncarcă caracterul tău",
    Callback = function()
        LocalPlayer.Character:BreakJoints()
    end
})

-- Fly simplu pe PC (fără zbor la player)
local flyToggle = Tabs.Movement:AddToggle("Fly", {
    Title = "Fly",
    Description = "Activează/Dezactivează zbor",
    Default = false
})

local flySpeed = 100
local flyBodyGyro, flyBodyVelocity
local flyingPC = false

flyToggle:OnChanged(function(val)
    local character = LocalPlayer.Character
    if not character then return end
    local hrp = character:FindFirstChild("HumanoidRootPart")
    local humanoid = character:FindFirstChild("Humanoid")
    if not hrp or not humanoid then return end

    flyingPC = val

    if val then
        humanoid.PlatformStand = true
        flyBodyGyro = Instance.new("BodyGyro", hrp)
        flyBodyGyro.P = 9e4
        flyBodyGyro.MaxTorque = Vector3.new(9e9, 9e9, 9e9)
        flyBodyGyro.CFrame = hrp.CFrame

        flyBodyVelocity = Instance.new("BodyVelocity", hrp)
        flyBodyVelocity.MaxForce = Vector3.new(9e9, 9e9, 9e9)
        flyBodyVelocity.Velocity = Vector3.new(0, 0, 0)

        local heartbeatConn
        heartbeatConn = RunService.Heartbeat:Connect(function()
            if not flyingPC then
                heartbeatConn:Disconnect()
                humanoid.PlatformStand = false
                flyBodyGyro:Destroy()
                flyBodyVelocity:Destroy()
                return
            end
            local moveVec = Vector3.new()
            if UserInputService:IsKeyDown(Enum.KeyCode.W) then
                moveVec = moveVec + workspace.CurrentCamera.CFrame.LookVector
            end
            if UserInputService:IsKeyDown(Enum.KeyCode.S) then
                moveVec = moveVec - workspace.CurrentCamera.CFrame.LookVector
            end
            if UserInputService:IsKeyDown(Enum.KeyCode.A) then
                moveVec = moveVec - workspace.CurrentCamera.CFrame.RightVector
            end
            if UserInputService:IsKeyDown(Enum.KeyCode.D) then
                moveVec = moveVec + workspace.CurrentCamera.CFrame.RightVector
            end
            if UserInputService:IsKeyDown(Enum.KeyCode.Space) then
                moveVec = moveVec + Vector3.new(0,1,0)
            end
            if UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) then
                moveVec = moveVec - Vector3.new(0,1,0)
            end

            flyBodyVelocity.Velocity = moveVec.Unit * flySpeed
            flyBodyGyro.CFrame = CFrame.new(hrp.Position, hrp.Position + moveVec)
        end)
    else
        humanoid.PlatformStand = false
        if flyBodyGyro then flyBodyGyro:Destroy() end
        if flyBodyVelocity then flyBodyVelocity:Destroy() end
    end
end)

-- Mobile Speed slider
Tabs.Mobile:AddSlider("MobileSpeed", {
    Title = "Speed",
    Description = "Setează viteza pe mobil",
    Default = 16,
    Min = 16,
    Max = 100,
    Rounding = 0
}):OnChanged(function(val)
    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
        LocalPlayer.Character.Humanoid.WalkSpeed = val
    end
end)

-- Mobile Fly Toggle (simplu)
Tabs.Mobile:AddToggle("FlyMobile", {
    Title = "Fly Mobile",
    Description = "Zbor simplu pentru mobil",
    Default = false
}):OnChanged(function(val)
    if val then
        loadstring(game:HttpGet("https://pastebin.com/raw/k4y1GSXz"))()
    else
        -- Nu e implementat off (poate restart?)
        warn("Dezactivează scriptul relogând.")
    end
end)

-- Goku Mode button (load modul extern)
Tabs.Main:AddButton({
    Title = "Goku Mode",
    Description = "Modul Goku Ultra Instinct",
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/Zee4625/Blox-Fruits/refs/heads/main/STAR"))()
    end
})

-- Minimizer icon pătrat clicabil
local minimizedIcon = Instance.new("ImageButton")
minimizedIcon.Size = UDim2.new(0, 60, 0, 60)
minimizedIcon.Position = UDim2.new(0, 12, 1, -72)
minimizedIcon.Image = "rbxassetid://7743879404"
minimizedIcon.BackgroundTransparency = 1
minimizedIcon.Visible = false
minimizedIcon.Parent = CoreGui

Fluent:OnMinimize(function()
    minimizedIcon.Visible = true
end)

minimizedIcon.MouseButton1Click:Connect(function()
    Fluent:ToggleMinimize()
    minimizedIcon.Visible = false
end)

-- END SCRIPT
