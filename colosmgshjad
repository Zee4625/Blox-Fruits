-- ZeeHub v7 - Full Script (FIXED)

local AcrylicLibrary = loadstring(game:HttpGetAsync("https://raw.githubusercontent.com/Zee4625/Blox-Fruits/refs/heads/main/Zee", true))()
local TextEffect = AcrylicLibrary.TextEffect

AcrylicLibrary.Theme:HightGreen()

local Window = AcrylicLibrary:CreateWindow({
    Title = TextEffect:AddColor("ZeeHUB - v7", Color3.fromRGB(0, 255, 0)),
    Logo = "rbxassetid://82858721461099",
    Keybind = Enum.KeyCode.LeftControl,
})

local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoidRootPart = character:WaitForChild("HumanoidRootPart")
local humanoid = character:WaitForChild("Humanoid")

local moveSpeed = 39
local flightActive = false
local xrayEnabled = false
local spyTarget = nil

-- Rebind when character respawns
local function rebindCharacter()
    character = player.Character or player.CharacterAdded:Wait()
    humanoidRootPart = character:WaitForChild("HumanoidRootPart")
    humanoid = character:WaitForChild("Humanoid")
end

player.CharacterAdded:Connect(function()
    rebindCharacter()
end)

-- Movement function
local function moveWithKeys()
    if not humanoidRootPart then return end
    local direction = Vector3.new(0, 0, 0)
    local userInput = game:GetService("UserInputService")

    if userInput:IsKeyDown(Enum.KeyCode.W) then
        direction = direction + humanoidRootPart.CFrame.LookVector
    end
    if userInput:IsKeyDown(Enum.KeyCode.S) then
        direction = direction - humanoidRootPart.CFrame.LookVector
    end
    if userInput:IsKeyDown(Enum.KeyCode.A) then
        direction = direction - humanoidRootPart.CFrame.RightVector
    end
    if userInput:IsKeyDown(Enum.KeyCode.D) then
        direction = direction + humanoidRootPart.CFrame.RightVector
    end

    humanoidRootPart.Velocity = direction * moveSpeed
end

-- Jump
local function activateJump()
    if humanoid then
        humanoid.JumpPower = 200
    end
end

-- Wallhack
local function toggleWallHack()
    if not character then return end
    for _, part in pairs(character:GetDescendants()) do
        if part:IsA("BasePart") then
            part.CanCollide = false
        end
    end
end

-- X-Ray
local function activateXRay()
    local function highlightPlayers()
        for _, p in pairs(game.Players:GetPlayers()) do
            if p ~= player and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
                if not p.Character:FindFirstChild("PlayerHighlight") then
                    local highlight = Instance.new("Highlight")
                    highlight.Name = "PlayerHighlight"
                    highlight.FillColor = Color3.fromRGB(255, 255, 255)
                    highlight.FillTransparency = 0.3
                    highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
                    highlight.OutlineTransparency = 0
                    highlight.Parent = p.Character
                end
            end
        end
    end

    local function clearHighlights()
        for _, p in pairs(game.Players:GetPlayers()) do
            if p.Character then
                local h = p.Character:FindFirstChild("PlayerHighlight")
                if h then h:Destroy() end
            end
        end
    end

    highlightPlayers()
    while xrayEnabled do
        task.wait(4)
        clearHighlights()
        highlightPlayers()
    end
    clearHighlights()
end

-- Run movement loop
game:GetService("RunService").Heartbeat:Connect(function()
    if flightActive then
        moveWithKeys()
    end
end)

-- Tabs
local TabMovement = Window:AddTab({Title = "HOME", Icon = "home"})

TabMovement:AddToggle({
    Title = "Speed Mode",
    Tip = "Activate Speed Movement",
    Default = false,
    Callback = function(val)
        flightActive = val
    end,
})

TabMovement:AddToggle({
    Title = "Jump Boost",
    Tip = "Enable High Jump",
    Default = false,
    Callback = function(val)
        if val then
            activateJump()
        else
            if humanoid then humanoid.JumpPower = 50 end
        end
    end,
})

TabMovement:AddToggle({
    Title = "Wallhack",
    Tip = "Pass through walls",
    Default = false,
    Callback = function()
        toggleWallHack()
    end,
})

TabMovement:AddButton({
    Title = "Rejoin",
    Tip = "Click to rejoin the game",
    Callback = function()
        game:GetService("TeleportService"):Teleport(game.PlaceId)
    end,
})

-- ESP Tab
local TabESP = Window:AddTab({Title = "ESP", Icon = "eye"})

TabESP:AddToggle({
    Title = "X-ray",
    Tip = "Highlight Players",
    Default = false,
    Callback = function(val)
        xrayEnabled = val
        if val then
            task.spawn(activateXRay)
        end
    end,
})

-- Player dropdown
local function GetOnlinePlayers()
    local players = {}
    for _, p in pairs(game.Players:GetPlayers()) do
        table.insert(players, p.Name)
    end
    return players
end

local Dropdown

local function UpdateDropdown()
    if Dropdown then
        Dropdown:SetValues(GetOnlinePlayers())
    end
end

Dropdown = TabESP:AddDropdown({
    Title = "Spy",
    Values = GetOnlinePlayers(),
    Default = "",
    Multi = false,
    MaxMulti = 1,
    Callback = function(val)
        local target = game.Players:FindFirstChild(val)
        if target and target.Character then
            spyTarget = target
            game.Workspace.CurrentCamera.CameraSubject = target.Character:FindFirstChild("Humanoid")
        end
    end,
})

-- Teleport to selected player
TabESP:AddButton({
    Title = "Teleport to Player",
    Tip = "Teleportează-te la jucătorul selectat",
    Callback = function()
        if spyTarget and spyTarget.Character and spyTarget.Character:FindFirstChild("HumanoidRootPart") then
            humanoidRootPart.CFrame = spyTarget.Character.HumanoidRootPart.CFrame + Vector3.new(0, 3, 0)
        end
    end,
})

-- Reset camera to self
TabESP:AddButton({
    Title = "Reset Camera",
    Tip = "Revino cu camera la tine",
    Callback = function()
        if character:FindFirstChild("Humanoid") then
            game.Workspace.CurrentCamera.CameraSubject = character:FindFirstChild("Humanoid")
        end
    end,
})

-- Update dropdown constantly
task.spawn(function()
    while true do
        UpdateDropdown()
        task.wait(1)
    end
end)

-- Info Tab
local Tabinfo = Window:AddTab({Title = "INFO", Icon = "Zee"})

Tabinfo:AddParagraph({
	Title = "Info",
	Description = AcrylicLibrary:HightlightSource([[Hi, this hub is still under development!
Don't forget to join our discord server!

server:
https://discord.gg/ecKrSHRZa6]])
})

Window:Notify({
	Title = "⚠️⚠️⚠️Important⚠️⚠️⚠️",
	Description = "This is still a beta! Join the discord for more info! THIS IS FOR ANY GAME BUT IS THE BETA!!",
	Duration = 12,
})
